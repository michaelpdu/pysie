SET(TAMARIN_ROOT ${PROJECT_SOURCE_DIR}/third_party/red_tamarin_stable/tamarin-cental)
INCLUDE_DIRECTORIES (
	${PROJECT_SOURCE_DIR}/third_party/boost_1_57
	${PROJECT_SOURCE_DIR}/third_party/pcre-7.9
	${PROJECT_SOURCE_DIR}/third_party/lzma-920
	${PROJECT_SOURCE_DIR}/third_party/zlib123
	${PROJECT_SOURCE_DIR}/third_party/swfparser
	${TAMARIN_ROOT}/VMPI
	${TAMARIN_ROOT}/AVMPI
	${TAMARIN_ROOT}/vmbase
	${TAMARIN_ROOT}/shell
	${TAMARIN_ROOT}/extensions
	${TAMARIN_ROOT}/MMgc
	${TAMARIN_ROOT}/core
	${TAMARIN_ROOT}/eval
	${TAMARIN_ROOT}/pcre
	${TAMARIN_ROOT}/nanojit
	${TAMARIN_ROOT}/vprof
	${TAMARIN_ROOT}/platform
	${TAMARIN_ROOT}/platform/unix
	${TAMARIN_ROOT}/generated
)

ADD_DEFINITIONS (	-DAVMSHELL_BUILD
	-DfPIC
	-DUNIX
	-DAVMPLUS_UNIX
	-D_CONSOLE
)

#aux_source_directory(${TAMARIN_ROOT}/core SRC_CORE_LIST)
#MESSAGE(STATUS "This is core src list: " ${SRC_CORE_LIST})

ADD_LIBRARY (avm STATIC
	AVMPI/AvmAssert.cpp
	AVMPI/float4Support.cpp
	AVMPI/MMgcPortUnix.cpp
	AVMPI/SpyUtilsPosix.cpp
    AVMPI/PosixMMgcPortUtils.cpp
	VMPI/ThreadsPosix.cpp
	VMPI/UnixDebugUtils.cpp
	VMPI/PosixPortUtils.cpp
    VMPI/PosixSpecificUtils.cpp
	VMPI/GenericPortUtils.cpp
	vmbase/Safepoint.cpp
	vmbase/VMThread.cpp
	core/AbcData.cpp #99
	core/AbcEnv.cpp
	core/AbcParser.cpp
	core/ActionBlockConstants.cpp
	core/ArrayClass.cpp
	core/ArrayObject.cpp
	core/avmplusList.cpp
	core/avm.cpp
	core/AvmCore.cpp	core/avmfeatures.cpp
	core/AvmLog.cpp
	core/avmplus.cpp
	core/avmplusDebugger.cpp
	core/avmplusDebuggerStubs.cpp
	core/avmplusHashtable.cpp
	core/AvmPlusScriptableObject.cpp
	core/BigInteger.cpp
	core/BooleanClass.cpp
	core/BuiltinTraits.cpp
	core/CdeclThunk.cpp
	core/ClassClass.cpp
	core/ClassClosure.cpp
	core/CodegenLIR.cpp
	core/Coder.cpp
	core/Date.cpp
	core/DateClass.cpp
	core/DateObject.cpp
	core/DescribeTypeClass.cpp
	core/Domain.cpp
	core/DomainEnv.cpp
	core/E4XNode.cpp
	core/ErrorClass.cpp    core/ErrorConstants.cpp
	core/Exception.cpp
	core/FrameState.cpp
	core/FunctionClass.cpp
	core/instr.cpp
	core/IntClass.cpp
	core/Interpreter.cpp
	core/LirHelper.cpp
	core/MathClass.cpp
	core/MathUtils.cpp
	core/MethodClosure.cpp
	core/MethodEnv.cpp
	core/MethodInfo.cpp
	core/Multiname.cpp
	core/MultinameHashtable.cpp
	core/Namespace.cpp
	core/NamespaceClass.cpp
	core/NamespaceSet.cpp
	core/NativeFunction.cpp
	core/NumberClass.cpp
	core/ObjectClass.cpp
	core/peephole.cpp
	core/PoolObject.cpp
	core/PrintWriter.cpp
	core/QCache.cpp
	core/RegExpClass.cpp
	core/RegExpObject.cpp
	core/Sampler.cpp
	core/ScopeChain.cpp
	core/ScriptBuffer.cpp
	core/ScriptObject.cpp
	core/StackTrace.cpp
	core/StringBuffer.cpp
	core/StringClass.cpp
	core/StringObject.cpp
	core/Toplevel.cpp
	core/Traits.cpp
	core/TypeDescriber.cpp
	core/UnicodeUtils.cpp
	core/VectorClass.cpp
	core/Verifier.cpp
	core/VTable.cpp
	core/wopcodes.cpp
	core/WordcodeEmitter.cpp
	core/WordcodeTranslator.cpp
	core/XMLClass.cpp
	core/XMLListClass.cpp
	core/XMLListObject.cpp
	core/XMLObject.cpp
	core/XMLParser16.cpp
	core/ByteArrayGlue.cpp
	core/DataIO.cpp
	core/exec.cpp
	core/exec-jit.cpp
	core/exec-osr.cpp
	core/exec-verifyall.cpp
	core/DomainMgr.cpp
	core/FloatClass.cpp
	core/JSONClass.cpp
	core/ProxyGlue.cpp
	core/atom.cpp
	core/d2a.cpp
	core/Float4Class.cpp
	core/DictionaryGlue.cpp
	core/AvmSerializer.cpp
	core/ObjectIO.cpp
	core/InvokerCompiler.cpp
	core/ConcurrencyGlue.cpp
	core/Isolate.cpp
	eval/eval-abc.cpp  #15
	eval/eval-avmplus.cpp
	eval/eval-cogen.cpp
	eval/eval-cogen-expr.cpp
	eval/eval-cogen-stmt.cpp
	eval/eval-compile.cpp
	eval/eval-lex.cpp
	eval/eval-lex-xml.cpp
	eval/eval-parse.cpp
	eval/eval-parse-expr.cpp
	eval/eval-parse-stmt.cpp
	eval/eval-parse-xml.cpp
	eval/eval-unicode.cpp
	eval/eval-util.cpp
	eval/eval-parse-config.cpp
	extensions/SamplerScript.cpp
	extensions/Selftest.cpp
	extensions/SelftestInit.cpp
	extensions/SelftestExec.cpp
	MMgc/FixedAlloc.cpp #19
	MMgc/FixedMalloc.cpp
	MMgc/GC.cpp
	MMgc/GCAlloc.cpp
	MMgc/GCAllocObject.cpp
	MMgc/GCDebug.cpp
	MMgc/GCGlobalNew.cpp
	MMgc/GCHashtable.cpp
	MMgc/GCHeap.cpp
	MMgc/GCLargeAlloc.cpp
	MMgc/GCLog.cpp
	MMgc/GCMemoryProfiler.cpp
	MMgc/GCObject.cpp
	MMgc/GCStack.cpp
	MMgc/GCTests.cpp
	MMgc/GCThreads.cpp
	MMgc/ZCT.cpp
	MMgc/GCPolicyManager.cpp
	MMgc/PageMap.cpp
	nanojit/Allocator.cpp #10
	nanojit/Assembler.cpp
	nanojit/CodeAlloc.cpp
	nanojit/Containers.cpp
	nanojit/Fragmento.cpp
	nanojit/LIR.cpp
	nanojit/Nativei386.cpp
	nanojit/NativeX64.cpp
	nanojit/njconfig.cpp
	nanojit/RegAlloc.cpp
	#nanojit/NativeThumb2.cpp
	pcre/pcre_globals.cpp
	platform/unix/MathUtilsUnix.cpp
	platform/unix/OSDepUnix.cpp
	platform/unix/unixcpuid.cpp
	vprof/vprof.cpp
	shell/avmshell.cpp #16
	shell/avmshellUnix.cpp
	shell/ConsoleOutputStream.cpp
	shell/DebugCLI.cpp
	shell/DomainClass.cpp
	shell/FileClass.cpp
	shell/FileInputStream.cpp
    shell/PosixFile.cpp
    shell/PosixPartialPlatform.cpp
	shell/ShellCore.cpp
	shell/ShellWorkerDomainGlue.cpp
    shell/ShellWorkerGlue.cpp
	shell/swf.cpp
	shell/SystemClass.cpp
	vprof/vprof.cpp
)
ADD_DEPENDENCIES (avm lzma) 
TARGET_LINK_LIBRARIES (avm lzma) 
